# Документация 
<a name="Документация"></a>

Содержание
========================

* [Документация](#Документация)
  * [Общие сведения об игре](#Общие-сведения-о-системе)
      * [Основные правила](#Основные-правила)
          * [Базовые понятия](#Базовые-понятия)
          * [Объекты](#Объекты)
              * [Персонаж](#Персонаж)
              * [Предметы](#Предметы)
              * [Декорации](#Декорации)
          * [Правила боя и физический урон](#Бой)
          * [Интерфейс](#Интерфейс)
  * [Диздок](#Диздок) 
  	* [Architectural drivers](#Architectural-drivers) 
  	* [Описание типичного пользователя](#Пользователь)
  	* [Наполнение](#Состав)
  		* [Диаграмма классов](#Диаграмма-классов)
  		* [Диаграммы последовательностей и конечных автоматов](#Диаграммы)


## Общие сведения о системе <a name="Общие-сведения-о-системе"></a>

Игра представляет собой классическую RPG с управлением одним персонажем. Управление происходит по стрелочным кнопкам:
* ```Left``` -> Left
* ```Right``` -> Right
* ```Up``` -> Up
* ``` Down``` -> Down
* ```W``` -> снять броню

### Основные правила <a name="Основные-правила"></a>

Основное действие происходит на заданной карте. Карта загружается из файла ```/src/main/resources/Map.txt ```.

На карте игрок видит различные игровые объекты:
* Главный герой - ```@```
* Несколько типов мобов: троль - ```&``` и орк - ```*```
* Несколько типов предметов: дополнительная жизнь - ```!``` и броня - ```O```.

Любой игровой объект имеет жизнь, атакующую способность и броню.

Игрок управляет одним персонажем - главным героем, который может перемещаться по карте.

Задача игрока - как можно дольше остаться в живых.

По пути игрок преодолевает препятствия в виде врагов - атакующих главного героя и пытающихся его убить. Игрок может подбирать предметы, лежащие на карте, которые могу увеличить его здоровье или броню. Броню можно снимать по ходу игры. При снятии она появляется в случайном месте на карте.


## Базовые понятия <a name="Базовые-понятия"></a>

Вся игра проходит на одной карте. Карта - это поле квадратного размера, на котором расположены различные объекты - персонажи, предметы и стены. Игроку изначально видна вся карта.
 

## Объекты <a name="Объекты"></a>

Объекты заданного размера, располагающиеся в произвольном месте на карте.
Объекты бывают:
- Персонажи
- Предметы
- Декорации (стены)

### Персонаж <a name="Персонаж"></a>

Персонажи обладают навыкать брони и в процессе игры могут получать дополнительное здоровье и броню. Каждый персонаж имеет заранее заданное значение жизнеспособности и боевой и броневой навыки. Жизнеспособность игроков может уменьшаться во время сражения с мобами, если броня игрока меньше атакующего значения моба. При подборе предмета ```!``` жизнеспособность главного героя увеличивается. Верхняя граница здоровья и брони не ограничена.

### Предметы <a name="Предметы"></a>

Главный герой может собирать предметы, лежащие на карте.
Предметы бывают двух типов:
* Здоровье - ```!```
* Броня - ```O```

Количество предметов, которое может набрать герой не ограничено. Предметы действуют на протяжении всей игры, пока герой жив. Броню можно снимать.


### Декорации <a name="Дерорации"></a>

Объекты карты, которые не могут управляться игроком. Стены появляются на карте по заранее заданным позициям.

## Правила боя и физический урон <a name="Бой"></a>

Когда главный герой наступает на клетку, в которой находиться другой персонаж, то происходит единоразовый бой. Игроки наносят урон друг другу по следующей формуле:

ЖИЗНЕСПОСОБНОСТЬ = ЖИЗНЕСПОСОБНОСТЬ - БОЕВОЙ_НАВЫК_СОПЕРНИКА + СОБСТВЕННАЯ_ЗАЩИТА.

Если здоровье становится равным 0, то персонаж умирает. Игра заканчивается, когда у главного героя закончится жизнь.

## Интерфейс <a name="Интерфейс"></a>

![интерфейс](https://github.com/ekaterinaMaljutina/Software-Design/blob/roguelike_RPG_impl/roguelike/interface.png)

---
Диздок <a name="Диздок"></a>
=====

Однопользовательская кросс-платформенная игра, на основе игры roguelike. Такие виды игр появились очень давно. Для запуска игры, пользователю нужно ее скачать. Основная идея - продержаться в игре как можно дольше. У пользователя нет возможности сохранения текущего состояния или загрузки предыдущего. Все графика в игре является консольной.

## Architectural drivers  <a name="Architectural-drivers"></a>

Есть несколько ключевых моментов, которые вносили корректировку в архитектуру:
* Консольная графика и загрузка уже готовой карты
* Предоставления возмозности расширения набора предметов
* Удобное управление и возможности расширения
* Разные виды игровых мобов, которые могут расширяться

Эти условия играли большую роль при создании архитектуры.


## Описание пользователей <a name="Пользователь"></a>
*Для реализованной игры можно описать следующих персонажей.*

Игроки

1. Иван Бердатый
* **Возраст:** 12
* **Образование** -
* **Уровень владения компьютером** средний
* **Личные качества** интересуется компьютерными играми, любознательный, открытый ко всему новому, интересуется новыми технологиями.
* **Особенности использования игры** качает новую игру в течение 3х дней с момента захода на торрентах. Думает, что игру любую игру можно пройти за 2-3 дня.

2. Степан Разин
* **Возраст:** 30
* **Образование** среднее
* **Уровень владения компьютером** высокое
* **Личные качества** халатный, живет в деревне, сам не много умеет программировать, может недоставать внимательности.
* **Особенности использования игры** может параллельно играть в несколько игр, поэтому не может пройти одну игру до конца. Пишет достаточно суровые отзывы на игры.

3. Петр Стюжев
* **Возраст:** 16
* **Образование** школа, 9 классов
* **Уровень владения компьютером** высокое
* **Личные качества** ленивый, не внимательный к деталям, ни доводит дела до конца, любит разгульный образ жизни.
* **Особенности использования игры** редко когда может заставить себя сделать что-то. Заходит в игру, только ради убивания времени.

Для таких персонажей будут полезные некоторые фичи:
* Возможность сохранить и продолжить игру в том же месте.
* Возможность вернуться на предыдущее сохранение и пройти кусок игры заново.
* Возможность прибавления жизни игроку во время игры.
* Возможность накапливать какие-то баллы во время игры.
* Возможность убивать персонажа, не соприкасаясь с ним.
* Генерация более сложных карт.
* Создание уровней сложности игры.

# Наполнение <a name="Состав"></a>
### Структура проекта

* Все игровые объекты имеют базовый класс GameObject, о которого они должны наследоваться. Каждый игровой объект имеет свою собственную позицию и атрибуты.
* Есть базовые классы для мобов ```Mob```  и предметов ```Item```. Это позволяет легко добавлять новые мобы и предметы. Любой моб или предмет должен наследоваться от соответствующего класса. 
* Стратегии перемещения и управления играми реализованы с помощью интерфейса ```Startegy```, который имеет только один метод ``` getMove () ```.
* ```Position``` - это класс, показывающий, где находится игровой объект. Он просто содержит x- и y-координаты.
* ```WorldMap``` - создание карты из текстового файла.
* ```World``` генерирует все игровые объекты (предметы, мобов, главного героя) и выполняет взаимодействие между ними.
* ```DrawMap``` используется для рисования карты отдельно от логики. 
* Пользовательский интерфейс реализован с помощью библиотеки ```AsciiPanel```.

### Используемые шаблоны

* ```Factory``` для создания мобов и предметов.
* ```Startegy``` для создания стратегии движения мобов и героя. Что позволяет добавлять новые элементы управления для игрока и новые стратегии для мобов и комбинировать их.
* ```Visitor``` для рисования карты отдельно от логики  (в классе ```MoveObject```).

### Диаграмма классов <a name="Диаграмма-классов"></a>
![Диаграмма классов](https://github.com/ekaterinaMaljutina/Software-Design/blob/roguelike_RPG_impl/roguelike/UML/classDiagram.png)

### Диаграммы последовательностей и конечных автоматов <a name="Диаграммы"></a>

#### Диаграмма последовательностей

Игра  ```Game``` инициализируется при запуске и создает игровой мир ```World```, который живет всегда и инициализируется один раз. 
Класс ```Game``` запускает движение игроков, пока герой жив. 

```World``` случайным образом создает начальное количество мобов и предметов на карте. 
 ```World``` взаимодействует со ```Strategy``` получая направления движения игрока и перемещая его по карте, а так же случайно двигает мобов.

```World``` так же контролирует пересечение с игрока с другими объектами на карте. Если герой стоит на одной клетке с мобом, то происходит бой.
* Если здоровье моба упало до 0, то он покидает карту.
* Если здоровье игрока равно 0, то игра заканчивается.
* Если герой строит на одной клетке с предметом, то предмет подбирается и улучшает его аттрибуты.

![Диаграмма последовательностей](https://github.com/ekaterinaMaljutina/Software-Design/blob/roguelike_RPG_impl/roguelike/UML/SequenceDiagram.png)

#### Диаграмма конечных автоматов


![Диаграмма конечных автоматов](https://github.com/ekaterinaMaljutina/Software-Design/blob/roguelike_RPG_impl/roguelike/UML/stateDiagram.png)



Cами диаграммы лежат [тут](https://github.com/ekaterinaMaljutina/Software-Design/tree/roguelike_RPG_impl/roguelike/UML).
